<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			.newpassword{
				width: 100%;
				height: 100%;
				background-size:cover;
				position:absolute;
				left:0;
				top:0;
				background-image: url(3.jpg);
				color:papayawhip;
				padding-top: 80px;
				float: left;
			}
			.layui-form{
				line-height: 90px;
				padding-left: 50px;
				align-content: center;
			}
			input{
				border-color: #009E94;
			}
			.click{
				padding-left: 20px;
			}
		</style>
	</head>
	<body>
		<div class="newpassword">
			<form name="tre" method="post" class="layui-form">
				用户名：<input type="text" id="adminnum" name="adminnum"><br>
				<!-- 旧密码：<input type="password" id="paw" name="paw"><br> -->
				新密码：<input type="password" id="adminpaw" name="adminpaw"><br>
				<input class="click" value="确认修改" lay-submit lay-filter="update"  type="submit">
			</form>
		</div>
		
		<script src="./X-admin/lib/layui/layui.js" charset="utf-8"></script>
		<script type="text/javascript" src="./X-admin/js/xadmin.js"></script>
		<script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
		
		<script>
			layui.use(['form'] , function(){
			    let form = layui.form
				form.on('submit(update)', function(data) {
					console.log(data.field)
					$.ajax({
						url:"http://localhost:8080/admin",
						type:"PUT",
						dataType:"JSON",
						contentType:"application/json",
						data:JSON.stringify(data.field),
						success:function(res){
							if(res.code == 0){
								
								layer.msg("修改成功！",{icon:6})
							}else{
									layer.msg("请填写正确的用户名或密码！",{icon:5})
							}
						}
					})
				
					return false;  //阻止默认跳转事件
				});
			})
		</script>
	</body>
</html>
